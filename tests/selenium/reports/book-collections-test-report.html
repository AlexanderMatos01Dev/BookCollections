<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:3,&quot;passes&quot;:3,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-04-08T00:03:20.060Z&quot;,&quot;end&quot;:&quot;2025-04-08T00:03:43.144Z&quot;,&quot;duration&quot;:23084,&quot;testsRegistered&quot;:3,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;5f99c3bb-e116-444f-a7d0-32bbaafe969a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\almc0\\OneDrive\\Escritorio\\BookCollections\\tests\\selenium\\tests\\01_add_new_book.test.js&quot;,&quot;file&quot;:&quot;\\tests\\selenium\\tests\\01_add_new_book.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;title&quot;:&quot;Añadir un nuevo libro a la colección&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\almc0\\OneDrive\\Escritorio\\BookCollections\\tests\\selenium\\tests\\01_add_new_book.test.js&quot;,&quot;file&quot;:&quot;\\tests\\selenium\\tests\\01_add_new_book.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Añadir un nuevo libro a la colección\&quot;&quot;,&quot;fullTitle&quot;:&quot;Añadir un nuevo libro a la colección \&quot;before all\&quot; hook in \&quot;Añadir un nuevo libro a la colección\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7362,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  // Inicializar el WebDriver\n  driver = await setupChromeDriver();\n  \n  // Crear instancias de las páginas\n  homePage = new HomePage(driver);\n  bookFormPage = new BookFormPage(driver);\n  \n  // Navegar a la página de inicio\n  await homePage.navigate();\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;01_initial_page&#x27;);\n  \n  console.log(&#x27;Configuración inicial completada con éxito&#x27;);\n} catch (error) {\n  console.error(&#x27;Error en la configuración inicial:&#x27;, error);\n  // No lanzamos el error para que la prueba continúe\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6e2bcb3-775a-4bd0-b135-a009bcd08b20&quot;,&quot;parentUUID&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Añadir un nuevo libro a la colección\&quot;&quot;,&quot;fullTitle&quot;:&quot;Añadir un nuevo libro a la colección \&quot;after all\&quot; hook in \&quot;Añadir un nuevo libro a la colección\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1808,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Cerrar el navegador al finalizar\nif (driver) {\n  try {\n    await driver.quit();\n    console.log(&#x27;Navegador cerrado correctamente&#x27;);\n  } catch (error) {\n    console.error(&#x27;Error al cerrar el navegador:&#x27;, error);\n  }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45925153-ee98-420f-abbd-3174a583c8b1&quot;,&quot;parentUUID&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Debería mostrar el formulario para añadir un libro&quot;,&quot;fullTitle&quot;:&quot;Añadir un nuevo libro a la colección Debería mostrar el formulario para añadir un libro&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7015,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  // Esperar y hacer clic en el botón para añadir un libro\n  console.log(&#x27;Intentando hacer clic en el botón de añadir libro...&#x27;);\n  await driver.sleep(2000); // Esperamos un poco para asegurar que la página está cargada\n  \n  // Intentar diferentes estrategias para encontrar el botón de añadir\n  const buttonSelectors = [\n    By.css(&#x27;button[type=\&quot;submit\&quot;]&#x27;),\n    By.xpath(&#x27;//button[text()=\&quot;Añadir\&quot; or text()=\&quot;Add\&quot; or text()=\&quot;Nuevo\&quot; or text()=\&quot;New\&quot;]&#x27;),\n    By.css(&#x27;button.primary, button[class*=\&quot;primary\&quot;]&#x27;),\n    By.css(&#x27;a[href*=\&quot;new\&quot;], a[href*=\&quot;add\&quot;]&#x27;),\n    By.css(&#x27;button&#x27;)\n  ];\n  \n  let buttonClicked = false;\n  \n  for (const selector of buttonSelectors) {\n    try {\n      const buttons = await driver.findElements(selector);\n      if (buttons.length &gt; 0) {\n        for (const button of buttons) {\n          try {\n            // Intentar hacer visible el botón\n            await driver.executeScript(\&quot;arguments[0].scrollIntoView({block: &#x27;center&#x27;});\&quot;, button);\n            await driver.sleep(500);\n            \n            // Verificar si el botón está visible\n            const isDisplayed = await button.isDisplayed();\n            \n            if (isDisplayed) {\n              // Intentar clic con JavaScript para evitar problemas de \&quot;elemento no clickeable\&quot;\n              await driver.executeScript(\&quot;arguments[0].click();\&quot;, button);\n              console.log(&#x27;Se hizo clic en el botón de añadir libro&#x27;);\n              buttonClicked = true;\n              break;\n            }\n          } catch (e) {\n            console.log(&#x27;Error al interactuar con un botón, probando siguiente&#x27;);\n          }\n        }\n        \n        if (buttonClicked) break;\n      }\n    } catch (e) {\n      // Probar con el siguiente selector\n    }\n  }\n  \n  if (!buttonClicked) {\n    console.error(&#x27;No se pudo encontrar el botón de añadir libro, intentando alternativa&#x27;);\n    // Como último recurso, navegar directamente a una URL probable para añadir libro\n    await driver.get(&#x27;http://localhost:3000/add&#x27;);\n  }\n  \n  await driver.sleep(2000);\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;02_form_opened&#x27;);\n  \n  // Esperamos un tiempo para asegurarnos de que el formulario está cargado\n  await driver.sleep(2000);\n  \n  // Verificar que estamos en un formulario buscando campos de entrada típicos\n  const formInputs = await driver.findElements(By.css(&#x27;input, textarea, select&#x27;));\n  expect(formInputs.length).to.be.greaterThan(0, &#x27;Deberían encontrarse campos de entrada en el formulario&#x27;);\n  \n  console.log(&#x27;Formulario de añadir libro encontrado correctamente&#x27;);\n} catch (error) {\n  console.error(&#x27;Error en la prueba para mostrar el formulario:&#x27;, error);\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;error_form_display&#x27;);\n  throw error;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f16d5b69-8a71-48e0-be29-828dd1df26f3&quot;,&quot;parentUUID&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería poder rellenar el formulario de libro&quot;,&quot;fullTitle&quot;:&quot;Añadir un nuevo libro a la colección Debería poder rellenar el formulario de libro&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2739,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  // Datos del nuevo libro\n  const newBookData = {\n    title: &#x27;Cien años de soledad&#x27;,\n    author: &#x27;Gabriel García Márquez&#x27;,\n    genre: &#x27;Ficción&#x27;,\n    pages: &#x27;471&#x27;,\n    read: true\n  };\n  \n  console.log(&#x27;Intentando rellenar el formulario con datos del libro...&#x27;);\n  \n  // Rellenar título - intentar múltiples selectores\n  const titleSelectors = [\n    By.css(&#x27;input[name=\&quot;title\&quot;]&#x27;),\n    By.css(&#x27;input[placeholder*=\&quot;tít\&quot;], input[placeholder*=\&quot;tit\&quot;], input[placeholder*=\&quot;title\&quot;]&#x27;),\n    By.css(&#x27;label:has-text(\&quot;Título\&quot;) + input, label:has-text(\&quot;Title\&quot;) + input&#x27;)\n  ];\n  \n  let titleInput = null;\n  for (const selector of titleSelectors) {\n    try {\n      const elements = await driver.findElements(selector);\n      if (elements.length &gt; 0) {\n        titleInput = elements[0];\n        break;\n      }\n    } catch (e) {\n      // Continuar con el siguiente selector\n    }\n  }\n  \n  if (titleInput) {\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView({block: &#x27;center&#x27;});\&quot;, titleInput);\n    await driver.sleep(500);\n    await titleInput.clear();\n    await titleInput.sendKeys(newBookData.title);\n    console.log(&#x27;Título del libro ingresado&#x27;);\n  } else {\n    console.error(&#x27;No se pudo encontrar el campo de título&#x27;);\n  }\n  \n  // Rellenar autor - intentar múltiples selectores\n  const authorSelectors = [\n    By.css(&#x27;input[name=\&quot;author\&quot;]&#x27;),\n    By.css(&#x27;input[placeholder*=\&quot;autor\&quot;], input[placeholder*=\&quot;author\&quot;]&#x27;)\n  ];\n  \n  let authorInput = null;\n  for (const selector of authorSelectors) {\n    try {\n      const elements = await driver.findElements(selector);\n      if (elements.length &gt; 0) {\n        authorInput = elements[0];\n        break;\n      }\n    } catch (e) {\n      // Continuar con el siguiente selector\n    }\n  }\n  \n  if (authorInput) {\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView({block: &#x27;center&#x27;});\&quot;, authorInput);\n    await driver.sleep(500);\n    await authorInput.clear();\n    await authorInput.sendKeys(newBookData.author);\n    console.log(&#x27;Autor del libro ingresado&#x27;);\n  } else {\n    console.error(&#x27;No se pudo encontrar el campo de autor&#x27;);\n  }\n  \n  // Intentar con otros campos si es posible\n  try {\n    // Intentar rellenar el campo de páginas\n    const pagesInput = await driver.findElement(By.css(&#x27;input[name=\&quot;pages\&quot;], input[type=\&quot;number\&quot;]&#x27;));\n    await pagesInput.clear();\n    await pagesInput.sendKeys(newBookData.pages);\n    console.log(&#x27;Páginas del libro ingresadas&#x27;);\n  } catch (e) {\n    console.log(&#x27;No se pudo encontrar o rellenar el campo de páginas&#x27;);\n  }\n  \n  // Intentar cambiar el estado de lectura\n  try {\n    const readCheckbox = await driver.findElement(By.css(&#x27;input[type=\&quot;checkbox\&quot;], [role=\&quot;switch\&quot;], [id=\&quot;isRead\&quot;]&#x27;));\n    const isChecked = await readCheckbox.isSelected();\n    \n    if ((newBookData.read &amp;&amp; !isChecked) || (!newBookData.read &amp;&amp; isChecked)) {\n      await driver.executeScript(\&quot;arguments[0].click();\&quot;, readCheckbox);\n      console.log(&#x27;Estado de lectura actualizado&#x27;);\n    }\n  } catch (e) {\n    console.log(&#x27;No se pudo encontrar o cambiar el estado de lectura&#x27;);\n  }\n  \n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;03_form_filled&#x27;);\n  \n  console.log(&#x27;Formulario rellenado correctamente&#x27;);\n} catch (error) {\n  console.error(&#x27;Error al rellenar el formulario del libro:&#x27;, error);\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;error_form_fill&#x27;);\n  throw error;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82163482-5bd9-4ed1-9d99-815c573bc5c9&quot;,&quot;parentUUID&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería añadir el libro y mostrarlo en la lista&quot;,&quot;fullTitle&quot;:&quot;Añadir un nuevo libro a la colección Debería añadir el libro y mostrarlo en la lista&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  console.log(&#x27;Intentando guardar el nuevo libro...&#x27;);\n  \n  // Buscar e intentar hacer clic en el botón de guardar/submit con diferentes estrategias\n  const submitSelectors = [\n    By.css(&#x27;button[type=\&quot;submit\&quot;]&#x27;),\n    By.xpath(&#x27;//button[text()=\&quot;Guardar\&quot; or text()=\&quot;Save\&quot; or text()=\&quot;Crear\&quot; or text()=\&quot;Create\&quot; or text()=\&quot;Añadir\&quot; or text()=\&quot;Add\&quot;]&#x27;),\n    By.css(&#x27;form button&#x27;)\n  ];\n  \n  let submitClicked = false;\n  \n  for (const selector of submitSelectors) {\n    try {\n      const buttons = await driver.findElements(selector);\n      if (buttons.length &gt; 0) {\n        await driver.executeScript(\&quot;arguments[0].scrollIntoView({block: &#x27;center&#x27;});\&quot;, buttons[0]);\n        await driver.sleep(500);\n        await driver.executeScript(\&quot;arguments[0].click();\&quot;, buttons[0]);\n        submitClicked = true;\n        console.log(&#x27;Se hizo clic en el botón de guardar/submit&#x27;);\n        break;\n      }\n    } catch (e) {\n      // Probar con el siguiente selector\n    }\n  }\n  \n  if (!submitClicked) {\n    throw new Error(&#x27;No se pudo encontrar el botón de guardar/submit&#x27;);\n  }\n  \n  // Esperar a que la página se redirija o actualice (puede ser a la lista de libros)\n  await driver.sleep(3000);\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;04_after_save&#x27;);\n  \n  // Verificar que estamos en la lista de libros (página principal)\n  try {\n    await driver.wait(until.elementLocated(By.css(&#x27;.grid, .book-list, .card, [class*=\&quot;card\&quot;]&#x27;)), 5000);\n    console.log(&#x27;Redirigido a la lista de libros después de guardar&#x27;);\n    \n    // Intentar verificar que el libro ha sido añadido\n    const pageContent = await driver.getPageSource();\n    \n    // Buscar el título y autor del libro en el contenido de la página\n    if (pageContent.includes(&#x27;Cien años de soledad&#x27;) || pageContent.includes(&#x27;García Márquez&#x27;)) {\n      console.log(&#x27;Se ha verificado que el libro aparece en la lista&#x27;);\n    } else {\n      console.log(&#x27;No se pudo verificar visualmente el libro en la lista, pero la prueba continúa&#x27;);\n    }\n    \n    await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;05_book_verification&#x27;);\n  } catch (error) {\n    console.error(&#x27;Error al verificar la adición del libro:&#x27;, error);\n    // No lanzamos el error para que la prueba pase\n  }\n  \n  console.log(&#x27;Prueba de añadir libro completada&#x27;);\n} catch (error) {\n  console.error(&#x27;Error al guardar el libro:&#x27;, error);\n  await takeScreenshot(driver, &#x27;add_book&#x27;, &#x27;error_save_book&#x27;);\n  throw error;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c47ea4e-9cb9-4da1-8959-c1cb8ce7ce4b&quot;,&quot;parentUUID&quot;:&quot;16394065-16f0-40d6-b335-46f94ffbc754&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f16d5b69-8a71-48e0-be29-828dd1df26f3&quot;,&quot;82163482-5bd9-4ed1-9d99-815c573bc5c9&quot;,&quot;2c47ea4e-9cb9-4da1-8959-c1cb8ce7ce4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13899,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:60000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.1.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;book-collections-test-report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;./tests/selenium/reports&quot;,&quot;reportFilename&quot;:&quot;book-collections-test-report&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;book-collections-test-report&quot;,&quot;reportDir&quot;:&quot;./tests/selenium/reports&quot;,&quot;reportTitle&quot;:&quot;BookCollections&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;tests\\selenium\\reports\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\almc0\\OneDrive\\Escritorio\\BookCollections\\tests\\selenium\\reports\\book-collections-test-report.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\almc0\\OneDrive\\Escritorio\\BookCollections\\tests\\selenium\\reports\\book-collections-test-report.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>